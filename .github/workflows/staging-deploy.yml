name: SSH Secret Diagnose
on: { workflow_dispatch: {} }

jobs:
  diag:
    runs-on: ubuntu-latest
    steps:
      - name: Check secret & Fingerprint (keine Ausgabe des Keys)
        shell: bash
        run: |
          if [ -z "${{ secrets.SSH_PRIVATE_KEY }}" ]; then
            echo "❌ SSH_PRIVATE_KEY is EMPTY"; exit 1; fi
          printf '%s\n' "${{ secrets.SSH_PRIVATE_KEY }}" > key.pem
          chmod 600 key.pem
          ssh-keygen -y -f key.pem > key.pub
          ssh-keygen -lf key.pub